<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HairBook - Kade≈ônictv√≠</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script>
        // Glob√°ln√≠ promise pro naƒçten√≠ modal≈Ø
        window.modalsReady = new Promise((resolve) => {
            window.resolveModalsReady = resolve;
        });
        
        // Kontrola p≈ôihl√°≈°en√≠
        window.addEventListener('DOMContentLoaded', async function() {
            try {
                const authResponse = await fetch('api/settings.php', { credentials: 'include' });
                if (!authResponse.ok) throw new Error('Auth check failed');
                const authData = await authResponse.json();
                if (!authData.authenticated) {
                    window.location.href = 'login.html';
                    return;
                }
            } catch (err) {
                console.error('Auth check error:', err);
                window.location.href = 'login.html';
                return;
            }
            
            // Naƒç√≠st mod√°ln√≠ okna P≈òED inicializac√≠ aplikace
            try {
                // Cache busting - p≈ôidat timestamp do URL
                const response = await fetch('modals.html?v=' + Date.now());
                const html = await response.text();
                
                console.log('üì¶ Modals HTML length:', html.length);
                console.log('üîç Contains productVatRate?', html.includes('id="productVatRate"'));
                
                // Vytvo≈ôit doƒçasn√Ω div a vlo≈æit HTML
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = html;
                
                // P≈ôesunout v≈°echny potomky do body
                while (tempDiv.firstChild) {
                    document.body.appendChild(tempDiv.firstChild);
                }
                
                console.log('‚úÖ Modals appended to body');
                
                // Poƒçkat, a≈æ budou konkr√©tn√≠ elementy skuteƒçnƒõ v DOM
                let attempts = 0;
                while (attempts < 50) {
                    const testElement = document.getElementById('productVatRate');
                    if (testElement) {
                        console.log('‚úÖ Element productVatRate found in DOM');
                        break;
                    }
                    await new Promise(resolve => setTimeout(resolve, 10));
                    attempts++;
                }
                
                if (attempts >= 50) {
                    console.error('‚ùå Element productVatRate NOT found after 500ms');
                    // Debug - vypsat v≈°echny modaly
                    const allModals = document.querySelectorAll('[id$=\"Modal\"]');
                    console.log('Found modals:', Array.from(allModals).map(m => m.id));
                }
                
                // Ozn√°mit, ≈æe modaly jsou p≈ôipraven√©
                if (window.resolveModalsReady) {
                    window.resolveModalsReady();
                }
            } catch (error) {
                console.error('‚ùå Failed to load modals:', error);
            }
        });
    </script>
</head>
<body>
    <div class="app-container">
        <!-- Lev√© menu -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-cut"></i>
                <h1>HairBook</h1>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-page="dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-page="clients">
                    <i class="fas fa-users"></i>
                    <span>Klienti</span>
                </a>
                <a href="#" class="nav-item" data-page="products">
                    <i class="fas fa-box"></i>
                    <span>Produkty</span>
                    <span id="lowStockBadge" class="nav-badge" style="display: none;">0</span>
                </a>
                <a href="#" class="nav-item" data-page="services">
                    <i class="fas fa-scissors"></i>
                    <span>Slu≈æby</span>
                </a>
                <a href="#" class="nav-item" data-page="calendar">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Kalend√°≈ô</span>
                </a>
                
                <!-- Prodej - sekce -->
                <div class="nav-group">
                    <div class="nav-group-header" onclick="toggleNavGroup(this)">
                        <i class="fas fa-cash-register"></i>
                        <span>Prodej</span>
                        <i class="fas fa-chevron-down nav-group-arrow"></i>
                    </div>
                    <div class="nav-group-items">
                        <a href="#" class="nav-item nav-subitem" data-page="sales">
                            <i class="fas fa-shopping-bag"></i>
                            <span>Prodej zbo≈æ√≠</span>
                        </a>
                        <a href="#" class="nav-item nav-subitem" data-page="sales-history">
                            <i class="fas fa-history"></i>
                            <span>Historie prodej≈Ø</span>
                        </a>
                    </div>
                </div>
                
                <!-- V√Ωdej materi√°lu - sekce -->
                <div class="nav-group">
                    <div class="nav-group-header" onclick="toggleNavGroup(this)">
                        <i class="fas fa-hand-holding-heart"></i>
                        <span>V√Ωdej materi√°lu</span>
                        <i class="fas fa-chevron-down nav-group-arrow"></i>
                    </div>
                    <div class="nav-group-items">
                        <a href="#" class="nav-item nav-subitem" data-page="material-issue">
                            <i class="fas fa-hand-sparkles"></i>
                            <span>Nov√Ω v√Ωdej</span>
                        </a>
                        <a href="#" class="nav-item nav-subitem" data-page="issue-history">
                            <i class="fas fa-history"></i>
                            <span>Historie v√Ωdej≈Ø</span>
                        </a>
                    </div>
                </div>
                
                <!-- P≈ô√≠jem zbo≈æ√≠ - sekce -->
                <div class="nav-group">
                    <div class="nav-group-header" onclick="toggleNavGroup(this)">
                        <i class="fas fa-truck-loading"></i>
                        <span>P≈ô√≠jem zbo≈æ√≠</span>
                        <i class="fas fa-chevron-down nav-group-arrow"></i>
                    </div>
                    <div class="nav-group-items">
                        <a href="#" class="nav-item nav-subitem" data-page="stock-receipt">
                            <i class="fas fa-dolly"></i>
                            <span>Nov√Ω p≈ô√≠jem</span>
                        </a>
                        <a href="#" class="nav-item nav-subitem" data-page="receipt-history">
                            <i class="fas fa-history"></i>
                            <span>Historie p≈ô√≠jm≈Ø</span>
                        </a>
                    </div>
                </div>
                
                <!-- Objedn√°vky - sekce -->
                <div class="nav-group">
                    <div class="nav-group-header" onclick="toggleNavGroup(this)">
                        <i class="fas fa-shopping-cart"></i>
                        <span>Objedn√°vky</span>
                        <i class="fas fa-chevron-down nav-group-arrow"></i>
                    </div>
                    <div class="nav-group-items">
                        <a href="#" class="nav-item nav-subitem" data-page="order">
                            <i class="fas fa-cart-plus"></i>
                            <span>Nov√° objedn√°vka</span>
                        </a>
                        <a href="#" class="nav-item nav-subitem" data-page="order-history">
                            <i class="fas fa-clipboard-list"></i>
                            <span>Historie objedn√°vek</span>
                        </a>
                    </div>
                </div>
                
                <a href="#" class="nav-item" data-page="accounting">
                    <i class="fas fa-file-invoice-dollar"></i>
                    <span>√öƒçetnictv√≠</span>
                </a>
                <a href="#" class="nav-item" data-page="settings">
                    <i class="fas fa-cog"></i>
                    <span>Nastaven√≠</span>
                </a>
            </nav>
            <div style="padding: 1rem; border-top: 1px solid rgba(255,255,255,0.1); margin-top: auto;">
                <button onclick="logout()" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Odhl√°sit se</span>
                </button>
            </div>
        </aside>

        <!-- Hlavn√≠ obsah -->
        <main class="main-content">
            <!-- Str√°nka Dashboard -->
            <div id="page-dashboard" class="page active">
                <div class="page-header">
                    <h2><i class="fas fa-chart-line"></i> Dashboard</h2>
                    <div style="font-size: 0.875rem; color: #6b7280;" id="dashboardDate"></div>
                </div>

                <div style="padding: 1rem;">
                <!-- Statistiky -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1rem; margin-bottom: 1.5rem; margin-top: 0.5rem;">
                    <!-- Dne≈°n√≠ tr≈æby -->
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 0.75rem; padding: 1rem; color: white; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Dne≈°n√≠ tr≈æby</div>
                                <div style="font-size: 2rem; font-weight: 700;" id="todayRevenue">0 Kƒç</div>
                            </div>
                            <div style="width: 48px; height: 48px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                                <i class="fas fa-coins"></i>
                            </div>
                        </div>
                        <div style="font-size: 0.75rem; opacity: 0.8;" id="todayRevenueChange"></div>
                    </div>

                    <!-- Dne≈°n√≠ n√°v≈°tƒõvy -->
                    <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: 0.75rem; padding: 1rem; color: white; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Dne≈°n√≠ n√°v≈°tƒõvy</div>
                                <div style="font-size: 2rem; font-weight: 700;" id="todayVisits">0</div>
                            </div>
                            <div style="width: 48px; height: 48px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                        </div>
                        <div style="font-size: 0.75rem; opacity: 0.8;" id="todayVisitsInfo"></div>
                    </div>

                    <!-- Celkem klient≈Ø -->
                    <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); border-radius: 0.75rem; padding: 1rem; color: white; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Celkem klient≈Ø</div>
                                <div style="font-size: 2rem; font-weight: 700;" id="totalClients">0</div>
                            </div>
                            <div style="width: 48px; height: 48px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                                <i class="fas fa-users"></i>
                            </div>
                        </div>
                        <div style="font-size: 0.75rem; opacity: 0.8;" id="activeClientsInfo"></div>
                    </div>

                    <!-- Produkty pod minimem -->
                    <div style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); border-radius: 0.75rem; padding: 1rem; color: white; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <div>
                                <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Produkty pod minimem</div>
                                <div style="font-size: 2rem; font-weight: 700;" id="lowStockProducts">0</div>
                            </div>
                            <div style="width: 48px; height: 48px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                        </div>
                        <div style="font-size: 0.75rem; opacity: 0.8;">Nutn√© objednat</div>
                    </div>
                </div>

                <!-- Grafy a tabulky -->
                <div style="display: grid; grid-template-columns: 1.5fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                    <!-- T√Ωdenn√≠ p≈ôehled -->
                    <div style="background: white; border-radius: 1rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <h3 style="margin: 0 0 1.5rem 0; display: flex; align-items: center; gap: 0.5rem; font-size: 1.125rem;">
                            <i class="fas fa-chart-bar" style="color: #6366f1;"></i>
                            T√Ωdenn√≠ p≈ôehled tr≈æeb
                        </h3>
                        <div id="weeklyChart" style="height: 200px;"></div>
                    </div>

                    <!-- Top slu≈æby -->
                    <div style="background: white; border-radius: 1rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <h3 style="margin: 0 0 1rem 0; display: flex; align-items: center; gap: 0.5rem; font-size: 1rem;">
                            <i class="fas fa-star" style="color: #f59e0b;"></i>
                            Nejobl√≠benƒõj≈°√≠ slu≈æby
                        </h3>
                        <div id="topServices"></div>
                    </div>
                </div>

                <!-- Posledn√≠ n√°v≈°tƒõvy a upozornƒõn√≠ -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 2rem;">
                    <!-- Posledn√≠ n√°v≈°tƒõvy -->
                    <div style="background: white; border-radius: 0.75rem; padding: 1rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; flex-direction: column; max-height: 280px;">
                        <h3 style="margin: 0 0 0.75rem 0; display: flex; align-items: center; gap: 0.5rem; font-size: 1rem; flex-shrink: 0;">
                            <i class="fas fa-clock" style="color: #10b981;"></i>
                            Posledn√≠ n√°v≈°tƒõvy
                        </h3>
                        <div id="recentVisits" style="overflow-y: auto; flex: 1;"></div>
                    </div>

                    <!-- Upozornƒõn√≠ -->
                    <div style="background: white; border-radius: 1rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; flex-direction: column; max-height: 400px;">
                        <h3 style="margin: 0 0 0.75rem 0; display: flex; align-items: center; gap: 0.5rem; font-size: 1rem; flex-shrink: 0;">
                            <i class="fas fa-bell" style="color: #ef4444;"></i>
                            Upozornƒõn√≠
                        </h3>
                        <div id="alerts" style="overflow-y: auto; flex: 1;"></div>
                    </div>
                </div>
                </div>
            </div>

            <!-- Str√°nka Klienti -->
            <div id="page-clients" class="page">
                <div class="page-header">
                    <h2>Klienti</h2>
                    <button class="btn btn-primary" onclick="addNewClient()">
                        <i class="fas fa-plus"></i> Nov√Ω klient
                    </button>
                </div>
                
                <div class="split-view">
                    <!-- Lev√° strana - skupiny a seznam klient≈Ø -->
                    <div class="list-panel" style="display: flex; flex-direction: row; gap: 1rem;">
                        <!-- Skupiny klient≈Ø (lev√Ω sloupec) -->
                        <div style="width: 200px; flex-shrink: 0;">
                            <div class="category-list" id="clientGroupList">
                                <!-- Skupiny klient≈Ø -->
                            </div>
                        </div>
                        
                        <!-- Seznam klient≈Ø (prav√Ω sloupec) -->
                        <div style="flex: 1; display: flex; flex-direction: column; min-width: 0;">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" placeholder="Hledat klienta..." id="clientSearch">
                            </div>
                            <div class="client-list" id="clientList">
                                <!-- Klienti budou p≈ôid√°ni p≈ôes JavaScript -->
                            </div>
                            <div id="clientsPagination"></div>
                        </div>
                    </div>

                    <!-- Detail klienta (prav√° strana) -->
                    <div class="detail-panel">
                        <div id="clientDetail" class="client-detail">
                            <div class="empty-state">
                                <i class="fas fa-user-circle"></i>
                                <p>Vyberte klienta ze seznamu</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Str√°nka Produkty -->
            <div id="page-products" class="page">
                <div class="page-header">
                    <h2>Produkty a Materi√°ly</h2>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn btn-secondary" id="entryModeBtn" onclick="toggleEntryMode()" style="display: none;">
                            <i class="fas fa-rocket"></i> Re≈æim po≈ôizov√°n√≠
                        </button>
                        <button class="btn btn-warning" id="filterLowStockBtn" onclick="toggleLowStockFilter()" style="display: none;">
                            <i class="fas fa-exclamation-triangle"></i> <span id="filterLowStockText">Zobrazit pod minimem</span>
                        </button>
                        <button class="btn btn-primary" onclick="addNewProduct()">
                            <i class="fas fa-plus"></i> Nov√Ω produkt
                        </button>
                    </div>
                </div>
                
                <div class="split-view">
                    <!-- Kategorie (√∫plnƒõ vlevo) -->
                    <div class="category-panel">
                        <div class="category-header">
                            <h3>Kategorie</h3>
                            <button class="btn-icon" onclick="addNewCategory()" title="P≈ôidat kategorii">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="category-list" id="categoryList">
                            <!-- Kategorie budou p≈ôid√°ny p≈ôes JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Seznam produkt≈Ø (prost≈ôedn√≠) -->
                    <div class="list-panel" style="display: flex; flex-direction: column; width: 400px;">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Hledat produkt..." id="productSearch">
                        </div>
                        <div class="client-list" id="productsList">
                            <!-- Produkty budou p≈ôid√°ny p≈ôes JavaScript -->
                        </div>
                        <div id="productsPagination"></div>
                    </div>

                    <!-- Detail produktu (prav√° strana) -->
                    <div class="detail-panel">
                        <div id="productDetail" class="client-detail">
                            <div class="empty-state">
                                <i class="fas fa-box"></i>
                                <p>Vyberte produkt ze seznamu</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Str√°nka Slu≈æby -->
            <div id="page-services" class="page">
                <div class="page-header">
                    <h2>Slu≈æby</h2>
                    <div style="display: flex; gap: 0.75rem; align-items: center; flex-wrap: wrap;">
                        <div class="search-box" style="min-width: 220px;">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Hledat slu≈æbu..." id="serviceListSearch">
                        </div>
                        <button class="btn btn-primary" onclick="addNewService()">
                            <i class="fas fa-plus"></i> Nov√° slu≈æba
                        </button>
                    </div>
                </div>
                <div class="services-list" id="servicesList">
                    <!-- Slu≈æby budou p≈ôid√°ny p≈ôes JavaScript -->
                </div>
                <div id="servicesPagination"></div>
            </div>

            <!-- Str√°nka Kalend√°≈ô -->
            <div id="page-calendar" class="page">
                <div class="page-header" style="flex-wrap: wrap; gap: 0.75rem; align-items: center;">
                    <div style="display: flex; flex-direction: column; gap: 0.25rem;">
                        <h2 style="margin: 0;">Kalend√°≈ô</h2>
                        <div id="calendarTodayInfo" style="font-size: 0.95rem; color: #4b5563;"></div>
                    </div>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <button class="btn btn-secondary" onclick="goToToday()" style="padding: 0.55rem 0.9rem;">
                            <i class="fas fa-calendar-day"></i> Dnes
                        </button>
                        <input type="date" id="calendarDate" style="padding: 0.6rem; border: 1px solid #e5e7eb; border-radius: 0.5rem;">
                        <div style="display:flex; align-items:center; gap:0.4rem; padding: 0.45rem 0.6rem; border:1px solid #e5e7eb; border-radius:0.5rem; background:white;">
                            <label for="calendarWeekOffset" style="font-size:0.9rem; color:#4b5563;">+ t√Ωdny</label>
                            <input type="number" id="calendarWeekOffset" min="0" value="0" style="width:70px; padding:0.35rem; border:1px solid #e5e7eb; border-radius:0.4rem;">
                            <button class="btn btn-secondary" style="padding: 0.35rem 0.75rem;" onclick="applyCalendarWeekOffset()">
                                <i class="fas fa-forward"></i>
                            </button>
                        </div>
                        <div style="display:flex; align-items:center; gap:0.4rem; padding: 0.45rem 0.6rem; border:1px solid #e5e7eb; border-radius:0.5rem; background:white;">
                            <label for="calendarShiftFilter" style="font-size:0.9rem; color:#4b5563;">Smƒõna klientky</label>
                            <select id="calendarShiftFilter" onchange="applyCalendarShiftFilter()" style="padding:0.35rem; border:1px solid #e5e7eb; border-radius:0.4rem;">
                                <option value="all">Cel√Ω den</option>
                                <option value="morning">Rann√≠ (8‚Äì13)</option>
                                <option value="afternoon">Odpoledn√≠ (13‚Äì19)</option>
                            </select>
                        </div>
                        <div style="display: inline-flex; border: 1px solid #e5e7eb; border-radius: 0.5rem; overflow: hidden;">
                            <button id="calendarViewDay" class="btn" style="border: none; background: #6366f1; color: white; padding: 0.6rem 0.9rem;" onclick="switchCalendarView('day')">Den</button>
                            <button id="calendarViewWeek" class="btn" style="border: none; background: #f3f4f6; color: #374151; padding: 0.6rem 0.9rem;" onclick="switchCalendarView('week')">T√Ωden</button>
                        </div>
                        <button class="btn btn-secondary" onclick="findNextAvailableSlot()" title="Naj√≠t nejbli≈æ≈°√≠ voln√Ω term√≠n podle smƒõny">
                            <i class="fas fa-search-plus"></i> Naj√≠t voln√Ω
                        </button>
                        <button class="btn btn-primary" onclick="openCalendarForm(null)">
                            <i class="fas fa-plus"></i> Nov√° rezervace
                        </button>
                    </div>
                </div>
                <div id="calendarContainer" style="height: calc(100vh - 120px); max-height: calc(100vh - 120px); overflow-y: auto;">
                    <div id="calendarDayView" style="display: none;"></div>
                    <div id="calendarWeekView" style="display: none;"></div>
                </div>
            </div>

            <!-- Str√°nka Nov√° n√°v≈°tƒõva (POS styl) -->
            <div id="page-new-visit" class="page">
                <div class="page-header" style="flex-wrap: wrap; gap: 1rem; align-items: center;">
                    <div style="display: flex; align-items: center; gap: 1rem; flex: 1; min-width: 300px;">
                        <button class="btn btn-secondary" onclick="cancelNewVisit()">
                            <i class="fas fa-arrow-left"></i> Zpƒõt
                        </button>
                        <h2 style="margin: 0;"><span id="visitTitle">Nov√° n√°v≈°tƒõva</span> - <span id="visitClientName"></span></h2>
                    </div>
                    <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                        <button class="btn" style="background: #8b5cf6; color: white;" onclick="loadTemplateModal()" title="Naƒç√≠st ≈°ablonu">
                            <i class="fas fa-file-import"></i> Naƒç√≠st ≈°ablonu
                        </button>
                        <button class="btn" style="background: #f59e0b; color: white;" onclick="saveTemplateModal()" title="Ulo≈æit jako ≈°ablonu">
                            <i class="fas fa-save"></i> Ulo≈æit jako ≈°ablonu
                        </button>
                        <button class="btn btn-primary" onclick="saveVisit(false)" id="btnSaveOpen">
                            <i class="fas fa-save"></i> Ulo≈æit n√°v≈°tƒõvu
                        </button>
                        <button class="btn btn-success" onclick="saveVisit(true)" id="btnSaveClose">
                            <i class="fas fa-check-circle"></i> Ulo≈æit a uzav≈ô√≠t + odepsat materi√°l
                        </button>
                    </div>
                </div>

                <div class="pos-layout">
                    <!-- Lev√° strana - Seznam slu≈æeb -->
                    <div class="pos-services">
                        <div class="pos-section-header">
                            <h3>Slu≈æby</h3>
                            <button class="btn-icon" onclick="addNewServiceInPos()" title="P≈ôidat slu≈æbu">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Hledat slu≈æbu..." id="serviceSearch">
                        </div>
                        <div class="service-rows" id="serviceRows">
                            <!-- Slu≈æby v ≈ô√°dkov√©m form√°tu -->
                        </div>
                    </div>

                    <!-- St≈ôedn√≠ ƒç√°st - Vybran√© slu≈æby -->
                    <div class="pos-selected">
                        <h3>Vybran√© slu≈æby</h3>
                        <div class="selected-services" id="selectedServices">
                            <div class="empty-state">
                                <i class="fas fa-hand-pointer"></i>
                                <p>Vyberte slu≈æbu ze seznamu</p>
                            </div>
                        </div>
                    </div>

                    <!-- Prav√° strana - Materi√°ly -->
                    <div class="pos-materials">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                <h3 style="margin: 0;">Materi√°ly</h3>
                                <div style="display: flex; gap: 0.5rem; background: white; padding: 0.25rem; border-radius: 0.5rem; border: 1px solid var(--border-color);">
                                    <button id="visitViewCards" onclick="switchVisitMaterialView('cards')" class="btn-view-switch active" title="Karty">
                                        <i class="fas fa-th-large"></i>
                                    </button>
                                    <button id="visitViewRows" onclick="switchVisitMaterialView('rows')" class="btn-view-switch" title="≈ò√°dky">
                                        <i class="fas fa-list"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="material-categories" id="materialCategories">
                                <!-- Kategorie materi√°l≈Ø -->
                            </div>
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" placeholder="Hledat materi√°l..." id="materialSearch">
                            </div>
                            <div class="material-cards" id="materialCards">
                                <!-- Materi√°ly v kartov√©m form√°tu -->
                            </div>
                            <div class="material-table" id="materialTable" style="display: none; overflow-y: auto; flex: 1;">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th style="width: 40px;"></th>
                                            <th>N√°zev</th>
                                            <th style="width: 120px;">Znaƒçka</th>
                                            <th style="width: 90px;">Poƒçet</th>
                                            <th style="width: 80px;">Jednotka</th>
                                        </tr>
                                    </thead>
                                    <tbody id="materialTableBody">
                                        <!-- Materi√°ly v ≈ô√°dkov√©m form√°tu -->
                                    </tbody>
                                </table>
                            </div>
                    </div>
                </div>
            </div>
            
            <!-- Plovouc√≠ panel p≈ôipraven√Ωch materi√°l≈Ø -->
            <div id="preparedMaterialsFloat" style="position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 500px; max-width: calc(100vw - 40px); background: white; border-radius: 1rem; box-shadow: 0 10px 40px rgba(0,0,0,0.2); z-index: 1000; display: none; border: 3px solid #f59e0b;">
                <div style="padding: 1rem; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center; background: #fef3c7; border-radius: 0.875rem 0.875rem 0 0;">
                    <h4 style="margin: 0; color: #92400e; font-size: 1rem;">
                        <i class="fas fa-clipboard-check"></i> P≈ôipraven√© materi√°ly (<span id="preparedCount">0</span>)
                    </h4>
                    <div style="display: flex; gap: 0.5rem;">
                        <button onclick="clearPreparedMaterials()" class="btn btn-sm" style="background: #fee2e2; color: #dc2626; padding: 0.375rem 0.75rem;">
                            <i class="fas fa-trash"></i>
                        </button>
                        <button onclick="togglePreparedMaterials()" class="btn btn-sm" style="background: #e5e7eb; color: #475569; padding: 0.375rem 0.75rem;">
                            <i class="fas fa-minus"></i>
                        </button>
                    </div>
                </div>
                <div id="preparedMaterialsContent" style="display: flex; flex-direction: column; max-height: 450px;">
                    <div id="preparedMaterialsList" style="padding: 1rem; overflow-y: auto; flex: 1; min-height: 0;">
                        <!-- Seznam p≈ôipraven√Ωch materi√°l≈Ø -->
                    </div>
                    <div style="padding: 0 1rem 1rem 1rem; border-top: 1px solid #e5e7eb; background: white; flex-shrink: 0;">
                        <button onclick="addPreparedMaterialsToService()" class="btn btn-primary" style="width: 100%; margin-top: 1rem; padding: 0.75rem; font-weight: 600;">
                            <i class="fas fa-plus-circle"></i> P≈ôidat k vybran√© slu≈æbƒõ
                        </button>
                    </div>
                </div>
            </div>

            <!-- Str√°nka Prodej -->
            <div id="page-sales" class="page">
                <div class="page-header" style="flex-shrink: 0;">
                    <h2><i class="fas fa-shopping-bag"></i> Prodej zbo≈æ√≠</h2>
                    <button class="btn btn-success" onclick="completeSale()">
                        <i class="fas fa-check"></i> Dokonƒçit prodej
                    </button>
                </div>

                <div class="sales-container" style="display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem; flex: 1; padding: 1rem; overflow: hidden;">
                    <!-- Lev√° strana - Produkty k prodeji -->
                    <div style="display: flex; flex-direction: column; gap: 1rem; overflow: hidden;">
                        <div style="display: flex; gap: 1rem; align-items: center; flex-shrink: 0;">
                            <div class="search-box" style="flex: 1;">
                                <i class="fas fa-search"></i>
                                <input type="text" placeholder="Hledat produkt na prodej..." id="salesProductSearch" oninput="filterSalesProducts()">
                            </div>
                            <div style="display: flex; gap: 0.5rem; background: white; padding: 0.25rem; border-radius: 0.5rem; border: 1px solid var(--border-color);">
                                <button id="salesViewCards" onclick="switchSalesView('cards')" class="btn-view-switch active" title="Karty">
                                    <i class="fas fa-th-large"></i>
                                </button>
                                <button id="salesViewRows" onclick="switchSalesView('rows')" class="btn-view-switch" title="≈ò√°dky">
                                    <i class="fas fa-list"></i>
                                </button>
                            </div>
                        </div>

                        <div id="salesProductGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; overflow-y: auto; padding: 0.5rem; flex: 1; align-content: start;">
                            <!-- Produkty na prodej - karty -->
                        </div>
                        
                        <div id="salesProductTable" style="display: none; overflow-y: auto; flex: 1;">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th style="width: 40px;"></th>
                                        <th>N√°zev</th>
                                        <th style="width: 120px;">Znaƒçka</th>
                                        <th style="width: 100px;">Poƒçet</th>
                                        <th style="width: 100px;">Cena</th>
                                        <th style="width: 80px;">Akce</th>
                                    </tr>
                                </thead>
                                <tbody id="salesProductTableBody">
                                    <!-- Produkty na prodej - ≈ô√°dky -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Prav√° strana - Ko≈°√≠k -->
                    <div style="background: white; border-radius: 1rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; flex-direction: column; overflow: hidden;">
                        <h3 style="margin: 0 0 1rem 0; display: flex; align-items: center; gap: 0.5rem; flex-shrink: 0;">
                            <i class="fas fa-shopping-cart"></i> Ko≈°√≠k
                        </h3>
                        
                        <div class="form-group" style="margin-bottom: 1rem; flex-shrink: 0;">
                            <label>Klient (nepovinn√©)</label>
                            <div class="autocomplete-wrapper">
                                <input type="text" 
                                       id="salesClientSearch" 
                                       placeholder="Zaƒçnƒõte ps√°t jm√©no klienta..." 
                                       autocomplete="off"
                                       oninput="filterSalesClientSuggestions()"
                                       onfocus="showSalesClientSuggestions()"
                                       onkeydown="handleSalesClientKeyDown(event)">
                                <div id="salesClientSuggestions" class="autocomplete-suggestions"></div>
                            </div>
                            <input type="hidden" id="salesClientId">
                        </div>
                        
                        <div id="salesCart" style="flex: 1; overflow-y: auto; margin-bottom: 1rem; min-height: 0;">
                            <div class="empty-state">
                                <i class="fas fa-shopping-cart"></i>
                                <p>Ko≈°√≠k je pr√°zdn√Ω</p>
                            </div>
                        </div>

                        <div style="border-top: 2px solid #e5e7eb; padding-top: 1rem; flex-shrink: 0;">
                            <div class="form-group" style="margin-bottom: 1rem;">
                                <label>Jm√©no z√°kazn√≠ka (nepovinn√©)</label>
                                <input type="text" id="salesCustomerName" placeholder="nap≈ô. Jana Nov√°kov√°">
                            </div>
                            
                            <div style="display: flex; justify-content: space-between; align-items: center; font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem;">
                                <span>Celkem:</span>
                                <span id="salesTotal" style="color: var(--primary-color);">0 Kƒç</span>
                            </div>

                            <button class="btn btn-success" onclick="completeSale()" style="width: 100%; font-size: 1.125rem; padding: 1rem;">
                                <i class="fas fa-check-circle"></i> Dokonƒçit prodej
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Str√°nka P≈ô√≠jem zbo≈æ√≠ -->
            <div id="page-stock-receipt" class="page">
                <div class="page-header">
                    <h2><i class="fas fa-truck-loading"></i> P≈ô√≠jem zbo≈æ√≠</h2>
                    <button class="btn btn-success" onclick="saveStockReceipt()">
                        <i class="fas fa-check"></i> Ulo≈æit p≈ô√≠jem
                    </button>
                </div>
                
                <div class="stock-receipt-container">
                    <!-- Rychl√© zad√°v√°n√≠ produkt≈Ø -->
                    <div class="stock-receipt-input">
                        <h3>Rychl√© zad√°n√≠ p≈ô√≠jmu</h3>
                        <div class="receipt-form">
                            <div class="form-group">
                                <label>Produkt</label>
                                <div class="autocomplete-wrapper">
                                    <input type="text" 
                                           id="receiptProductSearch" 
                                           placeholder="Zaƒçnƒõte ps√°t n√°zev produktu..." 
                                           autocomplete="off"
                                           oninput="filterProductSuggestions()"
                                           onfocus="showProductSuggestions()"
                                           onkeydown="handleProductKeyDown(event)">
                                    <div id="productSuggestions" class="autocomplete-suggestions"></div>
                                </div>
                                <input type="hidden" id="receiptProduct">
                                <button class="btn btn-secondary" style="margin-top: 0.5rem; width: 100%;" onclick="quickAddProductInReceipt()">
                                    <i class="fas fa-plus-circle"></i> P≈ôidat nov√Ω produkt
                                </button>
                            </div>
                            <div class="form-group" style="margin-bottom: 0.75rem;">
                                <label>Mno≈æstv√≠</label>
                                <input type="number" id="receiptQuantity" placeholder="Mno≈æstv√≠" step="0.01" onkeydown="if(event.key==='Enter') document.getElementById('receiptNote').focus()">
                            </div>
                            <div class="form-group" style="margin-bottom: 0.75rem;">
                                <label>Jednotka</label>
                                <select id="receiptUnit" onkeydown="if(event.key==='Enter') document.getElementById('receiptPurchasePrice').focus()">
                                    <option value="">Vyberte jednotku...</option>
                                </select>
                            </div>
                            <div class="form-group" style="margin-bottom: 0.75rem;">
                                <label>N√°kupn√≠ cena (Kƒç/ks)</label>
                                <input type="number" id="receiptPurchasePrice" placeholder="N√°kupn√≠ cena" step="0.01" min="0" onkeydown="if(event.key==='Enter') document.getElementById('receiptNote').focus()">
                            </div>
                            <div class="form-group" style="margin-bottom: 0.75rem;">
                                <label>Pozn√°mka (nepovinn√©)</label>
                                <input type="text" id="receiptNote" placeholder="nap≈ô. Dodavatel XY, Faktura 123..." onkeydown="if(event.key==='Enter') addToReceipt()">
                            </div>
                            <button class="btn btn-primary" onclick="addToReceipt()" style="margin-bottom: 1rem;">
                                <i class="fas fa-plus"></i> P≈ôidat
                            </button>
                            
                            <!-- Info o produktu - dol≈Ø pod tlaƒç√≠tko -->
                            <div id="receiptProductInfo" style="display: none; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 0.75rem; padding: 1rem; color: white; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                <h4 style="margin: 0 0 0.75rem 0; font-size: 0.9rem; opacity: 0.9;">üìä Informace o produktu</h4>
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; font-size: 0.875rem;">
                                    <div>
                                        <div style="opacity: 0.8; margin-bottom: 0.25rem; font-size: 0.75rem;">Aktu√°ln√≠ stav:</div>
                                        <div id="infoCurrentStock" style="font-weight: 700; font-size: 1.1rem;"></div>
                                    </div>
                                    <div>
                                        <div style="opacity: 0.8; margin-bottom: 0.25rem; font-size: 0.75rem;">Minim√°ln√≠ z√°soba:</div>
                                        <div id="infoMinStock" style="font-weight: 700; font-size: 1.1rem;"></div>
                                    </div>
                                    <div>
                                        <div style="opacity: 0.8; margin-bottom: 0.25rem; font-size: 0.75rem;">Stav po p≈ô√≠jmu:</div>
                                        <div id="infoNewStock" style="font-weight: 700; font-size: 1.1rem;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tabulka p≈ôijat√Ωch polo≈æek -->
                    <div class="stock-receipt-list">
                        <h3>Polo≈æky k p≈ô√≠jmu</h3>
                        <div class="receipt-table-container">
                            <table class="receipt-table">
                                <thead>
                                    <tr>
                                        <th>Produkt</th>
                                        <th>Mno≈æstv√≠</th>
                                        <th>Jednotka</th>
                                        <th>N√°kupn√≠ cena</th>
                                        <th>Pozn√°mka</th>
                                        <th>Akce</th>
                                    </tr>
                                </thead>
                                <tbody id="receiptTableBody">
                                    <tr class="empty-row">
                                        <td colspan="6" style="text-align: center; color: var(--text-light); padding: 2rem;">
                                            <i class="fas fa-inbox" style="font-size: 2rem; margin-bottom: 0.5rem; display: block;"></i>
                                            Zat√≠m ≈æ√°dn√© polo≈æky
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Str√°nka Historie p≈ô√≠jm≈Ø -->
            <div id="page-receipt-history" class="page">
                <div class="page-header" style="flex-shrink: 0;">
                    <h2><i class="fas fa-history"></i> Historie p≈ô√≠jm≈Ø zbo≈æ√≠</h2>
                </div>

                <div style="flex-shrink: 0; padding: 1rem; padding-bottom: 0; background: var(--bg-primary);">
                    <!-- Statistiky -->
                    <div class="card" style="margin-bottom: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div class="card-body" style="display: flex; gap: 2rem; align-items: center; flex-wrap: wrap; padding: 1rem;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="background: #E3F2FD; width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-list" style="color: #2196F3;"></i>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px;">P≈ô√≠jm≈Ø</div>
                                    <div style="font-size: 1.25rem; font-weight: 700; color: var(--text-primary);"><span id="receiptStatsCount">0</span></div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="background: #E8F5E9; width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-box" style="color: #4CAF50;"></i>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px;">Polo≈æek</div>
                                    <div style="font-size: 1.25rem; font-weight: 700; color: var(--text-primary);"><span id="receiptStatsItems">0</span></div>
                                </div>
                            </div>
                            <div style="margin-left: auto;">
                                <button onclick="exportReceiptHistoryToCSV()" class="btn btn-secondary" style="display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fas fa-download"></i> <span>Export CSV</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Filtr -->
                    <div class="card" style="margin-bottom: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div class="card-body" style="padding: 1rem;">
                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center;">
                                <button onclick="filterReceiptByMonth('current')" class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    <i class="fas fa-calendar-day"></i> Tento mƒõs√≠c
                                </button>
                                <button onclick="filterReceiptByMonth('last')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    Minul√Ω mƒõs√≠c
                                </button>
                                <button onclick="filterReceiptByMonth('last3')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    Posledn√≠ 3 mƒõs√≠ce
                                </button>
                                <button onclick="filterReceiptByMonth('last6')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    Posledn√≠ch 6 mƒõs√≠c≈Ø
                                </button>
                                <button onclick="filterReceiptByMonth('year')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    Leto≈°n√≠ rok
                                </button>
                                <select id="receiptMonthSelect" onchange="filterReceiptBySpecificMonth()" class="form-control" style="width: auto; padding: 0.5rem; font-size: 0.875rem;">
                                    <option value="">Vybrat mƒõs√≠c...</option>
                                </select>
                                <button onclick="filterReceiptByMonth('all')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem; margin-left: auto;">
                                    <i class="fas fa-list"></i> V≈°e
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Scrollovateln√Ω seznam -->
                <div style="flex: 1; overflow-y: auto; padding: 0 1rem 1rem 1rem;">
                    <div id="receiptHistoryList">
                        <!-- Seznam p≈ô√≠jemek bude zde -->
                    </div>
                </div>
            </div>

            <!-- Str√°nka V√Ωdej materi√°lu -->
            <div id="page-material-issue" class="page">
                <div class="page-header" style="flex-shrink: 0;">
                    <h2><i class="fas fa-hand-sparkles"></i> V√Ωdej materi√°lu</h2>
                </div>

                <div class="sales-container" style="display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem; flex: 1; padding: 1rem; overflow: hidden;">
                    <!-- Lev√° strana - Materi√°ly pro pr√°ci -->
                    <div style="display: flex; flex-direction: column; gap: 1rem; overflow: hidden;">
                        <div style="display: flex; gap: 1rem; align-items: center; flex-shrink: 0;">
                            <div class="search-box" style="flex: 1;">
                                <i class="fas fa-search"></i>
                                <input type="text" placeholder="Hledat materi√°l..." id="issueSearchInput" oninput="filterIssueProducts()">
                            </div>
                            <div style="display: flex; gap: 0.5rem; background: white; padding: 0.25rem; border-radius: 0.5rem; border: 1px solid var(--border-color);">
                                <button id="issueViewCards" onclick="switchIssueView('cards')" class="btn-view-switch active" title="Karty">
                                    <i class="fas fa-th-large"></i>
                                </button>
                                <button id="issueViewRows" onclick="switchIssueView('rows')" class="btn-view-switch" title="≈ò√°dky">
                                    <i class="fas fa-list"></i>
                                </button>
                            </div>
                        </div>

                        <div id="issueProductsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; overflow-y: auto; padding: 0.5rem; flex: 1; align-content: start;">
                            <!-- Materi√°ly pro v√Ωdej - karty -->
                        </div>
                        
                        <div id="issueProductsTable" style="display: none; overflow-y: auto; flex: 1;">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th style="width: 40px;"></th>
                                        <th>N√°zev</th>
                                        <th style="width: 120px;">Znaƒçka</th>
                                        <th style="width: 100px;">Poƒçet</th>
                                        <th style="width: 100px;">Jednotka</th>
                                        <th style="width: 80px;">Akce</th>
                                    </tr>
                                </thead>
                                <tbody id="issueProductsTableBody">
                                    <!-- Materi√°ly pro v√Ωdej - ≈ô√°dky -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Prav√° strana - V√Ωdejka -->
                    <div style="background: white; border-radius: 1rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; flex-direction: column; overflow: hidden;">
                        <h3 style="margin: 0 0 1rem 0; display: flex; align-items: center; gap: 0.5rem; flex-shrink: 0;">
                            <i class="fas fa-clipboard-list"></i> V√Ωdejka
                        </h3>
                        
                        <div style="flex: 1; overflow-y: auto; margin-bottom: 1rem; min-height: 0;">
                            <div id="issueCartEmpty" class="empty-state">
                                <i class="fas fa-clipboard-list"></i>
                                <p>V√Ωdejka je pr√°zdn√°</p>
                            </div>
                            <div id="issueCartItems" style="display: none;">
                                <!-- Polo≈æky v√Ωdejky -->
                            </div>
                        </div>

                        <div style="border-top: 2px solid #e5e7eb; padding-top: 1rem; flex-shrink: 0;">
                            <div class="form-group" style="margin-bottom: 1rem;">
                                <label>Pozn√°mka k v√Ωdeji</label>
                                <textarea id="issueNote" rows="3" placeholder="nap≈ô. Pou≈æito p≈ôi n√°v≈°tƒõvƒõ klienta..." style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 0.5rem; resize: vertical;"></textarea>
                            </div>
                            <button id="completeIssueBtn" class="btn btn-success w-100" onclick="completeMaterialIssue()">
                                <i class="fas fa-check"></i> Dokonƒçit v√Ωdej
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Str√°nka Historie v√Ωdej≈Ø -->
            <div id="page-issue-history" class="page">
                <div class="page-header" style="flex-shrink: 0;">
                    <h2><i class="fas fa-hand-sparkles"></i> Historie v√Ωdej≈Ø</h2>
                </div>

                <div style="flex-shrink: 0; padding: 1rem; padding-bottom: 0; background: var(--bg-primary);">
                    <!-- Statistiky -->
                    <div class="card" style="margin-bottom: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div class="card-body" style="display: flex; gap: 2rem; align-items: center; flex-wrap: wrap; padding: 1rem;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="background: #F3E5F5; width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-list" style="color: #a855f7;"></i>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px;">V√Ωdej≈Ø</div>
                                    <div style="font-size: 1.25rem; font-weight: 700; color: var(--text-primary);"><span id="issueStatsCount">0</span></div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="background: #E8F5E9; width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-box" style="color: #4CAF50;"></i>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px;">Polo≈æek</div>
                                    <div style="font-size: 1.25rem; font-weight: 700; color: var(--text-primary);"><span id="issueStatsItems">0</span></div>
                                </div>
                            </div>
                            <div style="margin-left: auto;">
                                <button onclick="exportIssueHistoryToCSV()" class="btn btn-secondary" style="display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fas fa-download"></i> <span>Export CSV</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Filtr -->
                    <div class="card" style="margin-bottom: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div class="card-body" style="padding: 1rem;">
                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center;">
                                <button onclick="filterIssueByMonth('current')" class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    <i class="fas fa-calendar-day"></i> Tento mƒõs√≠c
                                </button>
                                <button onclick="filterIssueByMonth('last')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    Minul√Ω mƒõs√≠c
                                </button>
                                <button onclick="filterIssueByMonth('last3')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    Posledn√≠ 3 mƒõs√≠ce
                                </button>
                                <button onclick="filterIssueByMonth('last6')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    Posledn√≠ch 6 mƒõs√≠c≈Ø
                                </button>
                                <button onclick="filterIssueByMonth('year')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    Leto≈°n√≠ rok
                                </button>
                                <select id="issueMonthSelect" onchange="filterIssueBySpecificMonth()" class="form-control" style="width: auto; padding: 0.5rem; font-size: 0.875rem;">
                                    <option value="">Vybrat mƒõs√≠c...</option>
                                </select>
                                <button onclick="filterIssueByMonth('all')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem; margin-left: auto;">
                                    <i class="fas fa-list"></i> V≈°e
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Scrollovateln√Ω seznam -->
                <div style="flex: 1; overflow-y: auto; padding: 0 1rem 1rem 1rem;">
                    <div id="issueHistoryList" style="display: grid; gap: 1rem;">
                        <!-- Historie v√Ωdej≈Ø -->
                    </div>
                </div>
            </div>

            <!-- Str√°nka Historie prodej≈Ø -->
            <div id="page-sales-history" class="page">
                <div class="page-header" style="flex-shrink: 0;">
                    <h2><i class="fas fa-cash-register"></i> Historie prodej≈Ø</h2>
                </div>

                <div style="flex-shrink: 0; padding: 1rem; padding-bottom: 0; background: var(--bg-primary);">
                    <!-- Statistiky -->
                    <div class="card" style="margin-bottom: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div class="card-body" style="display: flex; gap: 2rem; align-items: center; flex-wrap: wrap; padding: 1rem;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="background: #E3F2FD; width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-list" style="color: #2196F3;"></i>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px;">Prodej≈Ø</div>
                                    <div style="font-size: 1.25rem; font-weight: 700; color: var(--text-primary);"><span id="salesStatsCount">0</span></div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="background: #E8F5E9; width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-box" style="color: #4CAF50;"></i>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px;">Polo≈æek</div>
                                    <div style="font-size: 1.25rem; font-weight: 700; color: var(--text-primary);"><span id="salesStatsItems">0</span></div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="background: #FFF3E0; width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-coins" style="color: #FF9800;"></i>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px;">Celkem</div>
                                    <div style="font-size: 1.25rem; font-weight: 700; color: var(--text-primary);"><span id="salesStatsTotal">0</span> Kƒç</div>
                                </div>
                            </div>
                            <div style="margin-left: auto;">
                                <button onclick="exportSalesHistoryToCSV()" class="btn btn-secondary" style="display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fas fa-download"></i> <span>Export CSV</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Filtr -->
                    <div class="card" style="margin-bottom: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div class="card-body" style="padding: 1rem;">
                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center;">
                                <button onclick="filterSalesByMonth('current')" class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    <i class="fas fa-calendar-day"></i> Tento mƒõs√≠c
                                </button>
                                <button onclick="filterSalesByMonth('last')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    Minul√Ω mƒõs√≠c
                                </button>
                                <button onclick="filterSalesByMonth('last3')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    Posledn√≠ 3 mƒõs√≠ce
                                </button>
                                <button onclick="filterSalesByMonth('last6')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    Posledn√≠ch 6 mƒõs√≠c≈Ø
                                </button>
                                <button onclick="filterSalesByMonth('year')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    Leto≈°n√≠ rok
                                </button>
                                <select id="salesMonthSelect" onchange="filterSalesBySpecificMonth()" class="form-control" style="width: auto; padding: 0.5rem; font-size: 0.875rem;">
                                    <option value="">Vybrat mƒõs√≠c...</option>
                                </select>
                                <button onclick="filterSalesByMonth('all')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem; margin-left: auto;">
                                    <i class="fas fa-list"></i> V≈°e
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Scrollovateln√Ω seznam -->
                <div style="flex: 1; overflow-y: auto; padding: 0 1rem 1rem 1rem;">
                    <div id="salesHistoryList">
                        <!-- Seznam prodej≈Ø bude zde -->
                    </div>
                </div>
            </div>

            <!-- Str√°nka Objedn√°vka zbo≈æ√≠ -->
            <div id="page-order" class="page">
                <div class="page-header">
                    <h2><i class="fas fa-shopping-cart"></i> Objedn√°vka zbo≈æ√≠</h2>
                    <div style="display: flex; gap: 0.75rem;">
                        <button class="btn btn-secondary" onclick="generateOrderFromLowStock()">
                            <i class="fas fa-magic"></i> Doplnit produkty pod minimem
                        </button>
                        <button class="btn btn-success" onclick="exportOrder()">
                            <i class="fas fa-save"></i> Ulo≈æit
                        </button>
                    </div>
                </div>
                
                <div class="order-container">
                    <!-- P≈ôidat produkt do objedn√°vky -->
                    <div class="order-input">
                        <h3>P≈ôidat do objedn√°vky</h3>
                        <div class="receipt-form">
                            <div class="form-group">
                                <label>Produkt</label>
                                <div class="autocomplete-wrapper">
                                    <input type="text" 
                                           id="orderProductSearch" 
                                           placeholder="Zaƒçnƒõte ps√°t n√°zev produktu..." 
                                           autocomplete="off"
                                           oninput="filterOrderProductSuggestions()"
                                           onfocus="showOrderProductSuggestions()"
                                           onkeydown="handleOrderProductKeyDown(event)">
                                    <div id="orderProductSuggestions" class="autocomplete-suggestions"></div>
                                </div>
                                <input type="hidden" id="orderProduct">
                            </div>
                            <div class="form-group">
                                <label>Mno≈æstv√≠ k objedn√°n√≠</label>
                                <input type="number" id="orderQuantity" placeholder="Mno≈æstv√≠" step="0.01" onkeydown="if(event.key==='Enter') addToOrder()">
                            </div>
                            <div class="form-group">
                                <label>Jednotka</label>
                                <select id="orderUnit" onkeydown="if(event.key==='Enter') addToOrder()">
                                    <option value="">Vyberte jednotku...</option>
                                </select>
                            </div>
                            <button class="btn btn-primary" onclick="addToOrder()">
                                <i class="fas fa-plus"></i> P≈ôidat
                            </button>
                        </div>
                        
                        <!-- Info o produktu -->
                        <div id="orderProductInfo" class="product-info-box" style="display: none; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <h4>Informace o produktu</h4>
                            <div class="info-row">
                                <span class="label">Aktu√°ln√≠ stav:</span>
                                <span id="orderInfoCurrentStock"></span>
                            </div>
                            <div class="info-row">
                                <span class="label">Minim√°ln√≠ z√°soba:</span>
                                <span id="orderInfoMinStock"></span>
                            </div>
                            <div class="info-row">
                                <span class="label">Chyb√≠ do minima:</span>
                                <span id="orderInfoMissing" style="font-weight: 600;"></span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tabulka objedn√°vky -->
                    <div class="order-list">
                        <h3>Objedn√°vka</h3>
                        <div class="receipt-table-container">
                            <table class="receipt-table">
                                <thead>
                                    <tr>
                                        <th>Produkt</th>
                                        <th>Kategorie</th>
                                        <th>Aktu√°ln√≠ stav</th>
                                        <th>Objednat</th>
                                        <th>Jednotka</th>
                                        <th>Akce</th>
                                    </tr>
                                </thead>
                                <tbody id="orderTableBody">
                                    <tr class="empty-row">
                                        <td colspan="6" style="text-align: center; color: var(--text-light); padding: 2rem;">
                                            <i class="fas fa-shopping-cart" style="font-size: 2rem; margin-bottom: 0.5rem; display: block;"></i>
                                            ≈Ω√°dn√© produkty v objedn√°vce<br>
                                            <small>Kliknƒõte na "Doplnit produkty pod minimem" nebo p≈ôidejte ruƒçnƒõ</small>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Str√°nka √öƒçetnictv√≠ -->
            <div id="page-accounting" class="page">
                <div class="page-header">
                    <h2><i class="fas fa-file-invoice-dollar"></i> √öƒçetnictv√≠ a Reporty</h2>
                    <div style="display: flex; gap: 0.5rem;">
                        <select id="accountingYear" style="padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-size: 0.875rem;">
                            <!-- Roky budou p≈ôid√°ny dynamicky -->
                        </select>
                        <select id="accountingMonth" style="padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-size: 0.875rem;">
                            <option value="">Cel√Ω rok</option>
                            <option value="1">Leden</option>
                            <option value="2">√ömor</option>
                            <option value="3">B≈ôezen</option>
                            <option value="4">Duben</option>
                            <option value="5">Kvƒõten</option>
                            <option value="6">ƒåerven</option>
                            <option value="7">ƒåervenec</option>
                            <option value="8">Srpen</option>
                            <option value="9">Z√°≈ô√≠</option>
                            <option value="10">≈ò√≠jen</option>
                            <option value="11">Listopad</option>
                            <option value="12">Prosinec</option>
                        </select>
                        <button class="btn btn-primary" onclick="updateAllAccountingSections()">
                            <i class="fas fa-sync"></i> Aktualizovat
                        </button>
                    </div>
                </div>

                <div style="display: flex; height: calc(100% - 80px);">
                    <!-- Lev√© menu √∫ƒçetnictv√≠ -->
                    <div style="width: 250px; background: var(--bg-white); border-right: 1px solid var(--border-color); padding: 1rem; overflow-y: auto;">
                        <nav style="display: flex; flex-direction: column; gap: 0.5rem;">
                            <a href="#" onclick="showAccountingSection('overview'); return false;" 
                               class="accounting-nav-item active" data-section="overview"
                               style="padding: 0.75rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--text-dark); transition: all 0.2s;">
                                <i class="fas fa-chart-line" style="width: 20px;"></i>
                                <span>P≈ôehled tr≈æeb</span>
                            </a>
                            <a href="#" onclick="showAccountingSection('inventory'); return false;" 
                               class="accounting-nav-item" data-section="inventory"
                               style="padding: 0.75rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--text-dark); transition: all 0.2s;">
                                <i class="fas fa-warehouse" style="width: 20px;"></i>
                                <span>Inventura skladu</span>
                            </a>
                            <a href="#" onclick="showAccountingSection('comparison'); return false;" 
                               class="accounting-nav-item" data-section="comparison"
                               style="padding: 0.75rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--text-dark); transition: all 0.2s;">
                                <i class="fas fa-exchange-alt" style="width: 20px;"></i>
                                <span>Porovn√°n√≠ obdob√≠</span>
                            </a>
                            <a href="#" onclick="showAccountingSection('top-items'); return false;" 
                               class="accounting-nav-item" data-section="top-items"
                               style="padding: 0.75rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--text-dark); transition: all 0.2s;">
                                <i class="fas fa-trophy" style="width: 20px;"></i>
                                <span>Top produkty a slu≈æby</span>
                            </a>
                            <a href="#" onclick="showAccountingSection('costs'); return false;" 
                               class="accounting-nav-item" data-section="costs"
                               style="padding: 0.75rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--text-dark); transition: all 0.2s;">
                                <i class="fas fa-coins" style="width: 20px;"></i>
                                <span>N√°klady a zisk</span>
                            </a>
                            <a href="#" onclick="showAccountingSection('clients-stats'); return false;" 
                               class="accounting-nav-item" data-section="clients-stats"
                               style="padding: 0.75rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--text-dark); transition: all 0.2s;">
                                <i class="fas fa-users" style="width: 20px;"></i>
                                <span>Statistiky klient≈Ø</span>
                            </a>
                            <a href="#" onclick="showAccountingSection('snapshots'); return false;" 
                               class="accounting-nav-item" data-section="snapshots"
                               style="padding: 0.75rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--text-dark); transition: all 0.2s;">
                                <i class="fas fa-camera" style="width: 20px;"></i>
                                <span>Snapshoty obdob√≠</span>
                            </a>
                            <a href="#" onclick="showAccountingSection('export'); return false;" 
                               class="accounting-nav-item" data-section="export"
                               style="padding: 0.75rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--text-dark); transition: all 0.2s;">
                                <i class="fas fa-file-export" style="width: 20px;"></i>
                                <span>Exporty</span>
                            </a>
                        </nav>
                    </div>

                    <!-- Obsah √∫ƒçetnictv√≠ -->
                    <div style="flex: 1; padding: 1.5rem; overflow-y: auto;">
                        <!-- Sekce: P≈ôehled tr≈æeb -->
                        <div id="accounting-section-overview" class="accounting-section" style="display: block;">
                            <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 1.5rem;">
                                <h3 style="margin: 0 0 1.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fas fa-chart-line" style="color: #6366f1;"></i>
                                    P≈ôehled tr≈æeb
                                </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 0.5rem; padding: 1rem; color: white;">
                                <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Celkov√© tr≈æby</div>
                                <div style="font-size: 1.75rem; font-weight: 700;" id="totalRevenue">0 Kƒç</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: 0.5rem; padding: 1rem; color: white;">
                                <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Tr≈æby ze slu≈æeb</div>
                                <div style="font-size: 1.75rem; font-weight: 700;" id="serviceRevenue">0 Kƒç</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); border-radius: 0.5rem; padding: 1rem; color: white;">
                                <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Tr≈æby z prodeje</div>
                                <div style="font-size: 1.75rem; font-weight: 700;" id="productSalesRevenue">0 Kƒç</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); border-radius: 0.5rem; padding: 1rem; color: white;">
                                <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Poƒçet n√°v≈°tƒõv</div>
                                <div style="font-size: 1.75rem; font-weight: 700;" id="totalVisitsCount">0</div>
                            </div>
                        </div>
                        <div style="margin-top: 1.5rem; text-align: center;">
                            <button class="btn btn-primary" onclick="showRevenueModal()" style="min-width: 200px;">
                                <i class="fas fa-eye"></i> Zobrazit detailn√≠ p≈ôehled tr≈æeb
                            </button>
                        </div>
                    </div>

                    <!-- Graf mƒõs√≠ƒçn√≠ch tr≈æeb -->
                    <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 1.5rem;">
                        <h3 style="margin: 0 0 1.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-chart-area" style="color: #8b5cf6;"></i>
                            Mƒõs√≠ƒçn√≠ v√Ωvoj tr≈æeb
                        </h3>
                        <div style="position: relative; height: 350px;">
                            <canvas id="revenueChart"></canvas>
                        </div>
                        <div style="display: flex; justify-content: center; gap: 2rem; margin-top: 1rem; font-size: 0.875rem;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="width: 16px; height: 16px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 3px;"></div>
                                <span>Celkov√© tr≈æby</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="width: 16px; height: 16px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: 3px;"></div>
                                <span>Slu≈æby</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="width: 16px; height: 16px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); border-radius: 3px;"></div>
                                <span>Prodej produkt≈Ø</span>
                            </div>
                        </div>
                    </div>
                        </div>

                        <!-- Sekce: Inventura skladu -->
                        <div id="accounting-section-inventory" class="accounting-section" style="display: none;">
                            <!-- Inventura skladu -->
                    <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 1.5rem;">
                        <h3 style="margin: 0 0 1.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-warehouse" style="color: #10b981;"></i>
                            Stav skladu
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                            <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 0.5rem; padding: 1rem; color: white;">
                                <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Celkov√° hodnota skladu</div>
                                <div style="font-size: 1.75rem; font-weight: 700;" id="totalInventoryValue">0 Kƒç</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); border-radius: 0.5rem; padding: 1rem; color: white;">
                                <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Poƒçet produkt≈Ø</div>
                                <div style="font-size: 1.75rem; font-weight: 700;" id="totalProductsCount">0</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 0.5rem; padding: 1rem; color: white;">
                                <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Produkty s n√≠zk√Ωm stavem</div>
                                <div style="font-size: 1.75rem; font-weight: 700;" id="lowStockCount">0</div>
                            </div>
                        </div>
                        <div style="margin-top: 1.5rem; text-align: center;">
                            <button class="btn btn-primary" onclick="showInventoryModal()" style="min-width: 200px;">
                                <i class="fas fa-eye"></i> Zobrazit detailn√≠ inventuru
                            </button>
                        </div>
                        </div>
                        </div>

                        <!-- Sekce: Porovn√°n√≠ obdob√≠ -->
                        <div id="accounting-section-comparison" class="accounting-section" style="display: none; min-height: 400px;">
                            <div style="background: white; border-radius: 0.75rem; padding: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 1.5rem;">
                                <h3 style="margin: 0 0 1.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fas fa-exchange-alt" style="color: #6366f1;"></i>
                                    Porovn√°n√≠ obdob√≠
                                </h3>
                                
                                <div style="display: flex; gap: 1rem; align-items: center; margin-bottom: 1.5rem;">
                                    <select id="comparisonPeriod" onchange="generateComparison()" class="form-control" style="max-width: 200px;">
                                        <option value="month">Mƒõs√≠c vs Mƒõs√≠c</option>
                                        <option value="year">Rok vs Rok</option>
                                        <option value="quarter">ƒåtvrtlet√≠</option>
                                    </select>
                                    <button class="btn btn-primary" onclick="generateComparison()">
                                        <i class="fas fa-sync"></i> Aktualizovat
                                    </button>
                                </div>
                                
                                <div id="comparisonResults" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem;">
                                    <div style="text-align: center; padding: 2rem; color: #9ca3af;">Naƒç√≠t√°n√≠ dat...</div>
                                </div>
                            </div>
                        </div>

                        <!-- Sekce: Top produkty a slu≈æby -->
                        <div id="accounting-section-top-items" class="accounting-section" style="display: none; min-height: 400px; background: #f0f0f0; padding: 1.5rem;">
                            <h3 style="margin: 0 0 1.5rem 0; display: flex; align-items: center; gap: 0.5rem; background: #6366f1; color: white; padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <i class="fas fa-trophy"></i>
                                Top produkty a slu≈æby
                            </h3>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                                <!-- Top slu≈æby -->
                                <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border: 2px solid #f093fb;">
                                    <h4 style="margin: 0 0 1rem 0; display: flex; align-items: center; gap: 0.5rem; color: #f093fb; font-size: 1.1rem; font-weight: bold;">
                                        <i class="fas fa-cut"></i> Nejobl√≠benƒõj≈°√≠ slu≈æby
                                    </h4>
                                    <table id="topServicesTable" style="width: 100%; border-collapse: collapse;">
                                        <thead>
                                            <tr style="background: #f093fb; color: white; border-bottom: 2px solid #e5e7eb;">
                                                <th style="padding: 0.75rem; text-align: left;">Slu≈æba</th>
                                                <th style="padding: 0.75rem; text-align: right;">Poƒçet</th>
                                                <th style="padding: 0.75rem; text-align: right;">Tr≈æby</th>
                                            </tr>
                                        </thead>
                                        <tbody style="color: #000; font-size: 0.95rem;">
                                            <tr><td colspan="3" style="padding: 1rem; text-align: center; color: #000; font-weight: bold;">Naƒç√≠t√°n√≠...</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                                
                                <!-- Top produkty -->
                                <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border: 2px solid #4facfe;">
                                    <h4 style="margin: 0 0 1rem 0; display: flex; align-items: center; gap: 0.5rem; color: #4facfe; font-size: 1.1rem; font-weight: bold;">
                                        <i class="fas fa-shopping-cart"></i> Nejprod√°vanƒõj≈°√≠ produkty
                                    </h4>
                                    <table id="topProductsTable" style="width: 100%; border-collapse: collapse;">
                                        <thead>
                                            <tr style="background: #4facfe; color: white; border-bottom: 2px solid #e5e7eb;">
                                                <th style="padding: 0.75rem; text-align: left;">Produkt</th>
                                                <th style="padding: 0.75rem; text-align: right;">Poƒçet</th>
                                                <th style="padding: 0.75rem; text-align: right;">Tr≈æby</th>
                                            </tr>
                                        </thead>
                                        <tbody style="color: #000; font-size: 0.95rem;">
                                            <tr><td colspan="3" style="padding: 1rem; text-align: center; color: #000; font-weight: bold;">Naƒç√≠t√°n√≠...</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <!-- Top klienti -->
                            <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border: 2px solid #667eea;">
                                <h4 style="margin: 0 0 1rem 0; display: flex; align-items: center; gap: 0.5rem; color: #667eea; font-size: 1.1rem; font-weight: bold;">
                                    <i class="fas fa-star"></i> Nejv√Ωnosnƒõj≈°√≠ klienti
                                </h4>
                                <table id="topClientsTable" style="width: 100%; border-collapse: collapse;">
                                    <thead>
                                        <tr style="background: #667eea; color: white; border-bottom: 2px solid #e5e7eb;">
                                            <th style="padding: 0.75rem; text-align: left;">Klient</th>
                                            <th style="padding: 0.75rem; text-align: right;">Poƒçet n√°v≈°tƒõv</th>
                                            <th style="padding: 0.75rem; text-align: right;">Celkov√° √∫trata</th>
                                        </tr>
                                    </thead>
                                    <tbody style="color: #000; font-size: 0.95rem;">
                                        <tr><td colspan="3" style="padding: 1rem; text-align: center; color: #000; font-weight: bold;">Naƒç√≠t√°n√≠...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Sekce: N√°klady a zisk -->
                        <div id="accounting-section-costs" class="accounting-section" style="display: none; min-height: 400px;">
                            <h3 style="margin: 0 0 1.5rem 0; display: flex; align-items: center; gap: 0.5rem; background: white; padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <i class="fas fa-coins" style="color: #6366f1;"></i>
                                N√°klady a zisk
                            </h3>
                            
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                                <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 0.5rem; padding: 1rem; color: white;">
                                    <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Tr≈æby celkem</div>
                                    <div style="font-size: 1.5rem; font-weight: 700;" id="costsRevenue">0 Kƒç</div>
                                </div>
                                <div style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); border-radius: 0.5rem; padding: 1rem; color: white;">
                                    <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">N√°klady</div>
                                    <div style="font-size: 1.5rem; font-weight: 700;" id="costsPurchases">0 Kƒç</div>
                                </div>
                                <div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 0.5rem; padding: 1rem; color: white;">
                                    <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">V√Ωdeje materi√°lu</div>
                                    <div style="font-size: 1.5rem; font-weight: 700;" id="costsIssues">0 Kƒç</div>
                                </div>
                                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 0.5rem; padding: 1rem; color: white;">
                                    <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Zisk</div>
                                    <div style="font-size: 1.5rem; font-weight: 700;" id="costsProfit">0 Kƒç</div>
                                </div>
                            </div>
                            
                            <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 1.5rem;">
                                <h4 style="margin: 0 0 1rem 0;">Mar≈æe na produktech</h4>
                                <table id="productMarginsTable" style="width: 100%; border-collapse: collapse;">
                                    <thead>
                                        <tr style="background: #f9fafb; border-bottom: 2px solid #e5e7eb;">
                                            <th style="padding: 0.75rem; text-align: left;">Produkt</th>
                                            <th style="padding: 0.75rem; text-align: right;">N√°klady</th>
                                            <th style="padding: 0.75rem; text-align: right;">Tr≈æby</th>
                                            <th style="padding: 0.75rem; text-align: right;">Mar≈æe</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td colspan="4" style="padding: 1rem; text-align: center; color: #9ca3af;">Naƒç√≠t√°n√≠...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-top: 1.5rem; margin-bottom: 1.5rem;">
                                <h4 style="margin: 0 0 1rem 0;">Mar≈æe na slu≈æb√°ch</h4>
                                <table id="serviceMarginsTable" style="width: 100%; border-collapse: collapse;">
                                    <thead>
                                        <tr style="background: #f9fafb; border-bottom: 2px solid #e5e7eb;">
                                            <th style="padding: 0.75rem; text-align: left;">Slu≈æba</th>
                                            <th style="padding: 0.75rem; text-align: right;">N√°klady (materi√°l)</th>
                                            <th style="padding: 0.75rem; text-align: right;">Tr≈æby</th>
                                            <th style="padding: 0.75rem; text-align: right;">Mar≈æe</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td colspan="4" style="padding: 1rem; text-align: center; color: #9ca3af;">Naƒç√≠t√°n√≠...</td></tr>
                                    </tbody>
                                </table>
                            </div>

                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                                <div style="background: white; border-radius: 0.75rem; padding: 1.25rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                    <h4 style="margin: 0 0 0.5rem 0;">P≈ô√≠jemky (obdob√≠)</h4>
                                    <div style="font-size: 0.875rem; color: #6b7280;">Poƒçet doklad≈Ø</div>
                                    <div style="font-size: 1.5rem; font-weight: 700;" id="accountingReceiptsCount">0</div>
                                    <div style="margin-top: 0.5rem; font-size: 0.875rem; color: #6b7280;">Hodnota dle n√°kupn√≠ch cen</div>
                                    <div style="font-size: 1.25rem; font-weight: 700; color: #111827;" id="accountingReceiptsValue">0 Kƒç</div>
                                </div>
                                <div style="background: white; border-radius: 0.75rem; padding: 1.25rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                    <h4 style="margin: 0 0 0.5rem 0;">V√Ωdejky (obdob√≠)</h4>
                                    <div style="font-size: 0.875rem; color: #6b7280;">Poƒçet doklad≈Ø</div>
                                    <div style="font-size: 1.5rem; font-weight: 700;" id="accountingIssuesCount">0</div>
                                    <div style="margin-top: 0.5rem; font-size: 0.875rem; color: #6b7280;">Hodnota spot≈ôeby (doklady)</div>
                                    <div style="font-size: 1.25rem; font-weight: 700; color: #111827;" id="accountingIssuesValue">0 Kƒç</div>
                                    <div style="margin-top: 0.5rem; font-size: 0.75rem; color: #6b7280;">N√°v≈°tƒõvy: <span id="accountingIssuesVisit">0 Kƒç</span> ¬∑ Prodej (n√°klad): <span id="accountingIssuesSale">0 Kƒç</span> ¬∑ Ruƒçn√≠: <span id="accountingIssuesManual">0 Kƒç</span></div>
                                    <div style="margin-top: 0.25rem; font-size: 0.75rem; color: #6b7280;">Tr≈æby z prodeje: <span id="accountingIssuesSaleRevenue">0 Kƒç</span></div>
                                </div>
                            </div>
                            
                            <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <h4 style="margin: 0 0 1rem 0;">Rozlo≈æen√≠ n√°klad≈Ø</h4>
                                <div id="costsBreakdown"></div>
                            </div>
                        </div>

                        <!-- Sekce: Statistiky klient≈Ø -->
                        <div id="accounting-section-clients-stats" class="accounting-section" style="display: none; min-height: 400px;">
                            <h3 style="margin: 0 0 1.5rem 0; display: flex; align-items: center; gap: 0.5rem; background: white; padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <i class="fas fa-users" style="color: #6366f1;"></i>
                                Statistiky klient≈Ø
                            </h3>
                            
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 0.5rem; padding: 1rem; color: white;">
                                    <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Celkem klient≈Ø</div>
                                    <div style="font-size: 1.5rem; font-weight: 700;" id="statsTotalClients">0</div>
                                </div>
                                <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 0.5rem; padding: 1rem; color: white;">
                                    <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Aktivn√≠ klienti</div>
                                    <div style="font-size: 1.5rem; font-weight: 700;" id="statsActiveClients">0</div>
                                </div>
                                <div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 0.5rem; padding: 1rem; color: white;">
                                    <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Pr≈Ømƒõrn√° √∫trata</div>
                                    <div style="font-size: 1.5rem; font-weight: 700;" id="statsAvgSpending">0 Kƒç</div>
                                </div>
                                <div style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); border-radius: 0.5rem; padding: 1rem; color: white;">
                                    <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Nov√≠ klienti (mƒõs√≠c)</div>
                                    <div style="font-size: 1.5rem; font-weight: 700;" id="statsNewClients">0</div>
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                                <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                    <h4 style="margin: 0 0 1rem 0;">Nejƒçastƒõj≈°√≠ dny n√°v≈°tƒõv</h4>
                                    <div id="visitDaysChart"></div>
                                </div>
                                <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                    <h4 style="margin: 0 0 1rem 0;">Nejƒçastƒõj≈°√≠ hodiny</h4>
                                    <div id="visitHoursChart"></div>
                                </div>
                            </div>
                            
                            <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <h4 style="margin: 0 0 1rem 0;">Neaktivn√≠ klienti (3+ mƒõs√≠ce bez n√°v≈°tƒõvy)</h4>
                                <table id="inactiveClientsTable" style="width: 100%; border-collapse: collapse;">
                                    <thead>
                                        <tr style="background: #f9fafb; border-bottom: 2px solid #e5e7eb;">
                                            <th style="padding: 0.75rem; text-align: left;">Klient</th>
                                            <th style="padding: 0.75rem; text-align: left;">Posledn√≠ n√°v≈°tƒõva</th>
                                            <th style="padding: 0.75rem; text-align: left;">Kontakt</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td colspan="3" style="padding: 1rem; text-align: center; color: #9ca3af;">Naƒç√≠t√°n√≠...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Sekce: Snapshoty obdob√≠ -->
                        <div id="accounting-section-snapshots" class="accounting-section" style="display: none; min-height: 400px;">
                            <h3 style="background: white; padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 1.5rem; display: flex; align-items: center; justify-content: space-between;">
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fas fa-camera" style="color: #6366f1;"></i>
                                    <span>Snapshoty obdob√≠</span>
                                </div>
                                <button class="btn btn-primary" onclick="openCreateSnapshotModal()">
                                    <i class="fas fa-plus"></i> Vytvo≈ôit snapshot
                                </button>
                            </h3>
                            
                            <div style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1.5rem;">
                                <div style="display: flex; align-items: start; gap: 0.75rem;">
                                    <i class="fas fa-info-circle" style="color: #f59e0b; font-size: 1.25rem; margin-top: 0.1rem;"></i>
                                    <div style="flex: 1;">
                                        <div style="font-weight: 600; color: #92400e; margin-bottom: 0.25rem;">Co je snapshot?</div>
                                        <div style="font-size: 0.875rem; color: #92400e;">
                                            Snapshot ukl√°d√° aktu√°ln√≠ stav √∫ƒçetnictv√≠ (tr≈æby, n√°klady, zisk, statistiky) za vybran√© obdob√≠. Slou≈æ√≠ jako archiv pro srovn√°n√≠ a reporty. Data v aplikaci z≈Øst√°vaj√≠ editovateln√°.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="snapshotsList" style="display: grid; gap: 1rem;">
                                <div style="text-align: center; padding: 3rem; color: #9ca3af;">
                                    <i class="fas fa-camera" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;"></i>
                                    <h4 style="color: #6b7280; margin-bottom: 0.5rem;">Zat√≠m nem√°te ≈æ√°dn√© snapshoty</h4>
                                    <p style="margin-bottom: 1.5rem;">Vytvo≈ôte prvn√≠ snapshot kliknut√≠m na tlaƒç√≠tko v√Ω≈°e</p>
                                </div>
                            </div>
                        </div>

                        <!-- Sekce: Exporty -->
                        <div id="accounting-section-export" class="accounting-section" style="display: none; min-height: 400px;">
                            <h3 style="background: white; padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-file-export" style="color: #6366f1;"></i>
                                Exporty pro √∫ƒçetnictv√≠
                            </h3>
                            <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 1.5rem;">
                                <h4 style="margin: 0 0 1rem 0; font-size: 1rem; color: var(--text-dark);">Export tr≈æeb</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                                    <button class="btn btn-primary" onclick="exportRevenueToCSV()" style="padding: 1rem; font-size: 0.875rem; width: 100%;">
                                        <i class="fas fa-file-csv"></i> Tr≈æby do CSV
                                    </button>
                                    <button class="btn btn-primary" onclick="exportRevenueToExcel()" style="padding: 1rem; font-size: 0.875rem; width: 100%;">
                                        <i class="fas fa-file-excel"></i> Tr≈æby do Excel
                                    </button>
                                    <button class="btn btn-primary" onclick="exportRevenueDetailToCSV()" style="padding: 1rem; font-size: 0.875rem; width: 100%;">
                                        <i class="fas fa-list"></i> Detailn√≠ tr≈æby CSV
                                    </button>
                                </div>
                            </div>
                            
                            <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 1.5rem;">
                                <h4 style="margin: 0 0 1rem 0; font-size: 1rem; color: var(--text-dark);">Export skladu</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                                    <button class="btn btn-secondary" onclick="exportInventoryToCSV()" style="padding: 1rem; font-size: 0.875rem; width: 100%;">
                                        <i class="fas fa-file-csv"></i> Inventura do CSV
                                    </button>
                                    <button class="btn btn-secondary" onclick="exportInventoryToExcel()" style="padding: 1rem; font-size: 0.875rem; width: 100%;">
                                        <i class="fas fa-file-excel"></i> Inventura do Excel
                                    </button>
                                    <button class="btn btn-secondary" onclick="exportLowStockToCSV()" style="padding: 1rem; font-size: 0.875rem; width: 100%;">
                                        <i class="fas fa-exclamation-triangle"></i> N√≠zk√© stavy CSV
                                    </button>
                                </div>
                            </div>

                            <div style="background: white; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <h4 style="margin: 0 0 1rem 0; font-size: 1rem; color: var(--text-dark);">Export klient≈Ø</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                                    <button class="btn" onclick="exportClientsToCSV()" style="padding: 1rem; font-size: 0.875rem; width: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none;">
                                        <i class="fas fa-users"></i> Klienti do CSV
                                    </button>
                                    <button class="btn" onclick="exportClientVisitsToCSV()" style="padding: 1rem; font-size: 0.875rem; width: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none;">
                                        <i class="fas fa-history"></i> Historie n√°v≈°tƒõv CSV
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Str√°nka Historie objedn√°vek -->
            <div id="page-order-history" class="page">
                <div class="page-header" style="flex-shrink: 0;">
                    <h2><i class="fas fa-clipboard-list"></i> Historie objedn√°vek</h2>
                </div>

                <div style="flex-shrink: 0; padding: 1rem; padding-bottom: 0; background: var(--bg-primary);">
                    <!-- Statistiky -->
                    <div class="card" style="margin-bottom: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div class="card-body" style="display: flex; gap: 2rem; align-items: center; flex-wrap: wrap; padding: 1rem;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="background: #E3F2FD; width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-list" style="color: #2196F3;"></i>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px;">Objedn√°vek</div>
                                    <div style="font-size: 1.25rem; font-weight: 700; color: var(--text-primary);"><span id="orderStatsCount">0</span></div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="background: #E8F5E9; width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-box" style="color: #4CAF50;"></i>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px;">Polo≈æek</div>
                                    <div style="font-size: 1.25rem; font-weight: 700; color: var(--text-primary);"><span id="orderStatsItems">0</span></div>
                                </div>
                            </div>
                            <div style="margin-left: auto;">
                                <button onclick="exportOrderHistoryToCSV()" class="btn btn-secondary" style="display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fas fa-download"></i> <span>Export CSV</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Filtr -->
                    <div class="card" style="margin-bottom: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div class="card-body" style="padding: 1rem;">
                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center;">
                                <button onclick="filterOrderByMonth('current')" class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    <i class="fas fa-calendar-day"></i> Tento mƒõs√≠c
                                </button>
                                <button onclick="filterOrderByMonth('last')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    Minul√Ω mƒõs√≠c
                                </button>
                                <button onclick="filterOrderByMonth('last3')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    Posledn√≠ 3 mƒõs√≠ce
                                </button>
                                <button onclick="filterOrderByMonth('last6')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    Posledn√≠ch 6 mƒõs√≠c≈Ø
                                </button>
                                <button onclick="filterOrderByMonth('year')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                                    Leto≈°n√≠ rok
                                </button>
                                <select id="orderMonthSelect" onchange="filterOrderBySpecificMonth()" class="form-control" style="width: auto; padding: 0.5rem; font-size: 0.875rem;">
                                    <option value="">Vybrat mƒõs√≠c...</option>
                                </select>
                                <button onclick="filterOrderByMonth('all')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.875rem; margin-left: auto;">
                                    <i class="fas fa-list"></i> V≈°e
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Scrollovateln√Ω seznam -->
                <div style="flex: 1; overflow-y: auto; padding: 0 1rem 1rem 1rem;">
                    <div id="orderHistoryList">
                        <!-- Seznam objedn√°vek bude zde -->
                    </div>
                </div>
            </div>

            <!-- Str√°nka Nastaven√≠ -->
            <div id="page-settings" class="page">
                <div class="page-header">
                    <h2><i class="fas fa-cog"></i> Nastaven√≠</h2>
                </div>

                <div style="display: flex; height: calc(100vh - 140px); background: #f9fafb;">
                    <!-- Lev√© menu -->
                    <div style="width: 280px; background: white; border-right: 1px solid #e5e7eb; padding: 1.5rem 0; overflow-y: auto;">
                        <nav style="display: flex; flex-direction: column; gap: 0.25rem; padding: 0 1rem;">
                            <a href="#" onclick="showSettingsSection('salon'); return false;" 
                               class="settings-nav-item active" data-section="salon"
                               style="padding: 0.75rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--text-dark); transition: all 0.2s;">
                                <i class="fas fa-store" style="width: 20px;"></i>
                                <span>Informace o salonu</span>
                            </a>
                            <a href="#" onclick="showSettingsSection('security'); return false;" 
                               class="settings-nav-item" data-section="security"
                               style="padding: 0.75rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--text-dark); transition: all 0.2s;">
                                <i class="fas fa-shield-alt" style="width: 20px;"></i>
                                <span>Bezpeƒçnost</span>
                            </a>
                            <a href="#" onclick="showSettingsSection('templates'); return false;" 
                               class="settings-nav-item" data-section="templates"
                               style="padding: 0.75rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--text-dark); transition: all 0.2s;">
                                <i class="fas fa-clipboard-list" style="width: 20px;"></i>
                                <span>≈†ablony n√°v≈°tƒõv</span>
                            </a>
                            <a href="#" onclick="showSettingsSection('dbstats'); return false;" 
                               class="settings-nav-item" data-section="dbstats"
                               style="padding: 0.75rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--text-dark); transition: all 0.2s;">
                                <i class="fas fa-database" style="width: 20px;"></i>
                                <span>Statistiky DB/API</span>
                            </a>
                            <a href="#" onclick="showSettingsSection('backup'); return false;" 
                               class="settings-nav-item" data-section="backup"
                               style="padding: 0.75rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--text-dark); transition: all 0.2s;">
                                <i class="fas fa-database" style="width: 20px;"></i>
                                <span>Z√°loha dat</span>
                            </a>
                            <a href="#" onclick="showSettingsSection('about'); return false;" 
                               class="settings-nav-item" data-section="about"
                               style="padding: 0.75rem 1rem; border-radius: 0.5rem; display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--text-dark); transition: all 0.2s;">
                                <i class="fas fa-info-circle" style="width: 20px;"></i>
                                <span>O aplikaci</span>
                            </a>
                        </nav>
                    </div>

                    <!-- Obsah nastaven√≠ -->
                    <div style="flex: 1; padding: 1.5rem; overflow-y: auto;">
                        <!-- Sekce: Informace o salonu -->
                        <div id="settings-section-salon" class="settings-section" style="display: block;">
                    <div style="background: white; border-radius: 1rem; padding: 2.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); margin-bottom: 1rem;">
                        <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 2px solid #f3f4f6;">
                            <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;">
                                <i class="fas fa-store"></i>
                            </div>
                            <div>
                                <h3 style="margin: 0; font-size: 1.5rem; color: #111827;">Informace o salonu</h3>
                                <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: #6b7280;">Tyto √∫daje se zobraz√≠ na √∫ƒçtenk√°ch</p>
                            </div>
                        </div>
                        
                        <form onsubmit="saveSettings(event)">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                                <div class="form-group" style="grid-column: 1 / -1;">
                                    <label for="salonName" style="font-weight: 600; color: #374151; margin-bottom: 0.5rem; display: block;">
                                        <i class="fas fa-star" style="color: #ef4444; font-size: 0.5rem; margin-right: 0.25rem;"></i>
                                        N√°zev salonu
                                    </label>
                                    <input type="text" id="salonName" required placeholder="nap≈ô. HairBook Salon" 
                                           style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 0.5rem; font-size: 1rem; transition: all 0.2s;"
                                           onfocus="this.style.borderColor='#6366f1'; this.style.boxShadow='0 0 0 3px rgba(99,102,241,0.1)'"
                                           onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'">
                                </div>

                                <div class="form-group" style="grid-column: 1 / -1;">
                                    <label for="salonAddress" style="font-weight: 600; color: #374151; margin-bottom: 0.5rem; display: block;">
                                        <i class="fas fa-map-marker-alt" style="color: #6366f1; margin-right: 0.5rem;"></i>
                                        Adresa
                                    </label>
                                    <input type="text" id="salonAddress" placeholder="nap≈ô. Hlavn√≠ 123, Praha 1"
                                           style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 0.5rem; font-size: 1rem; transition: all 0.2s;"
                                           onfocus="this.style.borderColor='#6366f1'; this.style.boxShadow='0 0 0 3px rgba(99,102,241,0.1)'"
                                           onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'">
                                </div>

                                <div class="form-group">
                                    <label for="salonPhone" style="font-weight: 600; color: #374151; margin-bottom: 0.5rem; display: block;">
                                        <i class="fas fa-phone" style="color: #10b981; margin-right: 0.5rem;"></i>
                                        Telefon
                                    </label>
                                    <input type="tel" id="salonPhone" placeholder="nap≈ô. +420 123 456 789"
                                           style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 0.5rem; font-size: 1rem; transition: all 0.2s;"
                                           onfocus="this.style.borderColor='#6366f1'; this.style.boxShadow='0 0 0 3px rgba(99,102,241,0.1)'"
                                           onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'">
                                </div>

                                <div class="form-group">
                                    <label for="salonEmail" style="font-weight: 600; color: #374151; margin-bottom: 0.5rem; display: block;">
                                        <i class="fas fa-envelope" style="color: #f59e0b; margin-right: 0.5rem;"></i>
                                        Email
                                    </label>
                                    <input type="email" id="salonEmail" placeholder="nap≈ô. info@hairbook.cz"
                                           style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 0.5rem; font-size: 1rem; transition: all 0.2s;"
                                           onfocus="this.style.borderColor='#6366f1'; this.style.boxShadow='0 0 0 3px rgba(99,102,241,0.1)'"
                                           onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'">
                                </div>

                                <div class="form-group">
                                    <label for="salonWeb" style="font-weight: 600; color: #374151; margin-bottom: 0.5rem; display: block;">
                                        <i class="fas fa-globe" style="color: #3b82f6; margin-right: 0.5rem;"></i>
                                        Web
                                    </label>
                                    <input type="url" id="salonWeb" placeholder="nap≈ô. www.hairbook.cz"
                                           style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 0.5rem; font-size: 1rem; transition: all 0.2s;"
                                           onfocus="this.style.borderColor='#6366f1'; this.style.boxShadow='0 0 0 3px rgba(99,102,241,0.1)'"
                                           onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'">
                                </div>

                                <div class="form-group">
                                    <label for="salonICO" style="font-weight: 600; color: #374151; margin-bottom: 0.5rem; display: block;">
                                        <i class="fas fa-id-card" style="color: #8b5cf6; margin-right: 0.5rem;"></i>
                                        IƒåO
                                    </label>
                                    <input type="text" id="salonICO" placeholder="nap≈ô. 12345678"
                                           style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 0.5rem; font-size: 1rem; transition: all 0.2s;"
                                           onfocus="this.style.borderColor='#6366f1'; this.style.boxShadow='0 0 0 3px rgba(99,102,241,0.1)'"
                                           onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'">
                                </div>

                                <div class="form-group">
                                    <label for="salonDIC" style="font-weight: 600; color: #374151; margin-bottom: 0.5rem; display: block;">
                                        <i class="fas fa-file-invoice" style="color: #ec4899; margin-right: 0.5rem;"></i>
                                        DIƒå
                                    </label>
                                    <input type="text" id="salonDIC" placeholder="nap≈ô. CZ12345678"
                                           style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 0.5rem; font-size: 1rem; transition: all 0.2s;"
                                           onfocus="this.style.borderColor='#6366f1'; this.style.boxShadow='0 0 0 3px rgba(99,102,241,0.1)'"
                                           onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'">
                                </div>

                                <div class="form-group" style="grid-column: 1 / -1;">
                                    <label for="receiptFooter" style="font-weight: 600; color: #374151; margin-bottom: 0.5rem; display: block;">
                                        <i class="fas fa-comment-dots" style="color: #14b8a6; margin-right: 0.5rem;"></i>
                                        Patiƒçka √∫ƒçtenky
                                    </label>
                                    <textarea id="receiptFooter" rows="3" placeholder="nap≈ô. Dƒõkujeme za Va≈°i n√°v≈°tƒõvu!"
                                              style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 0.5rem; font-size: 1rem; resize: vertical; transition: all 0.2s; font-family: inherit;"
                                              onfocus="this.style.borderColor='#6366f1'; this.style.boxShadow='0 0 0 3px rgba(99,102,241,0.1)'"
                                              onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'"></textarea>
                                </div>
                            </div>

                            <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 2rem; padding-top: 2rem; border-top: 2px solid #f3f4f6;">
                                <button type="submit" class="btn btn-primary" style="padding: 0.875rem 2rem; font-size: 1rem; font-weight: 600;">
                                    <i class="fas fa-save"></i> Ulo≈æit nastaven√≠
                                </button>
                            </div>
                        </form>
                    </div>
                        </div>

                        <!-- Sekce: Bezpeƒçnost -->
                        <div id="settings-section-security" class="settings-section" style="display: none;">
                    <div style="background: white; border-radius: 1rem; padding: 2.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);">
                        <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 2px solid #f3f4f6;">
                            <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div>
                                <h3 style="margin: 0; font-size: 1.5rem; color: #111827;">Bezpeƒçnost</h3>
                                <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: #6b7280;">Zmƒõna p≈ô√≠stupov√©ho hesla</p>
                            </div>
                        </div>
                        
                        <form onsubmit="changePassword(event)">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; max-width: 800px;">
                                <div class="form-group">
                                    <label for="currentPassword" style="font-weight: 600; color: #374151; margin-bottom: 0.5rem; display: block;">
                                        <i class="fas fa-lock" style="color: #6b7280; margin-right: 0.5rem;"></i>
                                        Souƒçasn√© heslo
                                    </label>
                                    <input type="password" id="currentPassword" required placeholder="Zadejte souƒçasn√© heslo"
                                           style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 0.5rem; font-size: 1rem; transition: all 0.2s;"
                                           onfocus="this.style.borderColor='#6366f1'; this.style.boxShadow='0 0 0 3px rgba(99,102,241,0.1)'"
                                           onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'">
                                </div>

                                <div class="form-group">
                                    <label for="newPassword" style="font-weight: 600; color: #374151; margin-bottom: 0.5rem; display: block;">
                                        <i class="fas fa-key" style="color: #10b981; margin-right: 0.5rem;"></i>
                                        Nov√© heslo
                                    </label>
                                    <input type="password" id="newPassword" required placeholder="Zadejte nov√© heslo (min. 4 znaky)"
                                           minlength="4"
                                           style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 0.5rem; font-size: 1rem; transition: all 0.2s;"
                                           onfocus="this.style.borderColor='#6366f1'; this.style.boxShadow='0 0 0 3px rgba(99,102,241,0.1)'"
                                           onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'">
                                </div>
                            </div>

                            <div style="display: flex; gap: 1rem; justify-content: flex-start; margin-top: 2rem;">
                                <button type="submit" class="btn btn-primary" style="padding: 0.875rem 2rem; font-size: 1rem; font-weight: 600;">
                                    <i class="fas fa-key"></i> Zmƒõnit heslo
                                </button>
                            </div>
                        </form>
                    </div>
                        </div>

                        <!-- Sekce: Z√°loha dat -->
                        <!-- Sekce: ≈†ablony n√°v≈°tƒõv -->
                        <div id="settings-section-templates" class="settings-section" style="display: none;">
                    <div style="background: white; border-radius: 1rem; padding: 2.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);">
                                <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 2px solid #f3f4f6;">
                                    <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;">
                                        <i class="fas fa-clipboard-list"></i>
                                    </div>
                                    <div>
                                        <h3 style="margin: 0; font-size: 1.5rem; color: #111827;">≈†ablony n√°v≈°tƒõv</h3>
                                        <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: #6b7280;">Spravujte ulo≈æen√© ≈°ablony pro rychl√© vytv√°≈ôen√≠ n√°v≈°tƒõv</p>
                                    </div>
                                </div>
                                
                                <div id="settingsTemplatesList">
                                    <!-- Seznam ≈°ablon -->
                                </div>
                                <div id="templatesPagination" style="margin-top: 1rem;"></div>
                            </div>
                        </div>
                        
                        <!-- Sekce: Statistiky DB/API -->
                        <div id="settings-section-dbstats" class="settings-section" style="display: none;">
                            <div style="background: white; border-radius: 1rem; padding: 2.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);">
                                <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1.5rem;">
                                    <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #0ea5e9 0%, #2563eb 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;">
                                        <i class="fas fa-database"></i>
                                    </div>
                                    <div>
                                        <h3 style="margin: 0; font-size: 1.5rem; color: #111827;">Statistiky datab√°ze</h3>
                                        <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: #6b7280;">P≈ôehled velikosti a poƒçtu z√°znam≈Ø v tabulk√°ch</p>
                                    </div>
                                </div>
                                
                                <div id="dbStatsContainer" style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 0.75rem; padding: 1rem;">
                                    <div style="text-align: center; padding: 1.5rem; color: #9ca3af;">
                                        <i class="fas fa-spinner fa-spin" style="font-size: 1.25rem; margin-bottom: 0.5rem;"></i>
                                        <div>Naƒç√≠t√°m statistiky...</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="settings-section-backup" class="settings-section" style="display: none;">
                            <div style="background: white; border-radius: 1rem; padding: 2.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);">
                                <h3 style="margin: 0 0 1.5rem 0; font-size: 1.5rem; color: #111827;">
                                    <i class="fas fa-database" style="color: #6366f1; margin-right: 0.5rem;"></i>
                                    Z√°loha dat
                                </h3>
                                <p style="color: #6b7280; margin-bottom: 2rem;">Exportujte v≈°echna data aplikace do z√°lo≈æn√≠ho souboru nebo obnovte data ze z√°lohy.</p>
                                
                                <!-- Export dat -->
                                <div style="background: #f0fdf4; border: 2px solid #86efac; border-radius: 0.75rem; padding: 1.5rem; margin-bottom: 1.5rem;">
                                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                                        <div style="width: 48px; height: 48px; background: #22c55e; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white;">
                                            <i class="fas fa-download" style="font-size: 1.25rem;"></i>
                                        </div>
                                        <div>
                                            <h4 style="margin: 0; font-size: 1.125rem; color: #166534;">Export z√°lohy</h4>
                                            <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: #15803d;">St√°hnƒõte v≈°echna data v JSON form√°tu</p>
                                        </div>
                                    </div>
                                    <button onclick="exportBackup()" class="btn btn-primary" style="background: #22c55e; border-color: #22c55e;">
                                        <i class="fas fa-download"></i> St√°hnout z√°lohu
                                    </button>
                                </div>
                                
                                <!-- Import dat -->
                                <div style="background: #fef3c7; border: 2px solid #fcd34d; border-radius: 0.75rem; padding: 1.5rem;">
                                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                                        <div style="width: 48px; height: 48px; background: #eab308; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white;">
                                            <i class="fas fa-upload" style="font-size: 1.25rem;"></i>
                                        </div>
                                        <div>
                                            <h4 style="margin: 0; font-size: 1.125rem; color: #854d0e;">Import z√°lohy</h4>
                                            <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: #a16207;">Nahrajte z√°lo≈æn√≠ soubor a obnovte data</p>
                                        </div>
                                    </div>
                                    <input type="file" id="backupFileInput" accept=".json" style="display: none;" onchange="importBackup(event)">
                                    <button onclick="document.getElementById('backupFileInput').click()" class="btn btn-primary" style="background: #eab308; border-color: #eab308;">
                                        <i class="fas fa-upload"></i> Nahr√°t z√°lohu
                                    </button>
                                </div>
                                
                                <!-- Varov√°n√≠ -->
                                <div style="background: #fee2e2; border: 2px solid #fca5a5; border-radius: 0.75rem; padding: 1.5rem; margin-top: 1.5rem;">
                                    <div style="display: flex; gap: 1rem;">
                                        <i class="fas fa-exclamation-triangle" style="color: #dc2626; font-size: 1.5rem;"></i>
                                        <div>
                                            <h4 style="margin: 0 0 0.5rem 0; color: #991b1b; font-size: 1rem;">D≈Øle≈æit√© upozornƒõn√≠</h4>
                                            <ul style="margin: 0; padding-left: 1.25rem; color: #b91c1c; font-size: 0.875rem;">
                                                <li>Import z√°lohy p≈ôep√≠≈°e v≈°echna aktu√°ln√≠ data</li>
                                                <li>P≈ôed importem si vytvo≈ôte z√°lohu aktu√°ln√≠ch dat</li>
                                                <li>Importujte pouze soubory vytvo≈ôen√© touto aplikac√≠</li>
                                                <li>Po importu bude nutn√© znovu nastavit p≈ôihla≈°ovac√≠ heslo (heslo se do z√°lohy neukl√°d√°)</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Sekce: O aplikaci -->
                        <div id="settings-section-about" class="settings-section" style="display: none;">
                            <div style="background: white; border-radius: 1rem; padding: 2.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);">
                                <div style="text-align: center; margin-bottom: 2rem;">
                                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 20px; display: inline-flex; align-items: center; justify-content: center; color: white; font-size: 2.5rem; margin-bottom: 1rem;">
                                        <i class="fas fa-cut"></i>
                                    </div>
                                    <h3 style="margin: 0 0 0.5rem 0; font-size: 2rem; color: #111827;">HairBook</h3>
                                    <p style="margin: 0; color: #6b7280; font-size: 1.125rem;">Profesion√°ln√≠ syst√©m pro spr√°vu kade≈ônictv√≠</p>
                                </div>
                                
                                <div style="background: #f9fafb; border-radius: 0.75rem; padding: 1.5rem; margin-bottom: 1.5rem;">
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                        <div>
                                            <div style="font-size: 0.875rem; color: #6b7280; margin-bottom: 0.25rem;">Verze</div>
                                            <div style="font-size: 1.125rem; font-weight: 600; color: #111827;">1.0.0</div>
                                        </div>
                                        <div>
                                            <div style="font-size: 0.875rem; color: #6b7280; margin-bottom: 0.25rem;">Datum vyd√°n√≠</div>
                                            <div style="font-size: 1.125rem; font-weight: 600; color: #111827;">27. 11. 2025</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="border-top: 2px solid #f3f4f6; padding-top: 1.5rem; margin-top: 1.5rem;">
                                    <h4 style="margin: 0 0 1rem 0; color: #111827; font-size: 1.125rem;">
                                        <i class="fas fa-star" style="color: #fbbf24; margin-right: 0.5rem;"></i>
                                        Hlavn√≠ funkce
                                    </h4>
                                    <ul style="margin: 0; padding-left: 1.5rem; color: #6b7280; line-height: 1.75;">
                                        <li>Spr√°va klient≈Ø a jejich historie n√°v≈°tƒõv</li>
                                        <li>Spr√°va produkt≈Ø a skladu</li>
                                        <li>P≈ôehled tr≈æeb a √∫ƒçetnictv√≠</li>
                                        <li>Export dat do CSV a Excel</li>
                                        <li>Z√°loha a obnoven√≠ dat</li>
                                        <li>Tisk √∫ƒçtenek</li>
                                    </ul>
                                </div>
                                
                                <div style="border-top: 2px solid #f3f4f6; padding-top: 1.5rem; margin-top: 1.5rem;">
                                    <h4 style="margin: 0 0 1rem 0; color: #111827; font-size: 1.125rem;">
                                        <i class="fas fa-code" style="color: #6366f1; margin-right: 0.5rem;"></i>
                                        Technologie
                                    </h4>
                                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                                        <span style="background: #ede9fe; color: #6366f1; padding: 0.5rem 1rem; border-radius: 0.5rem; font-size: 0.875rem; font-weight: 600;">HTML5</span>
                                        <span style="background: #dbeafe; color: #2563eb; padding: 0.5rem 1rem; border-radius: 0.5rem; font-size: 0.875rem; font-weight: 600;">CSS3</span>
                                        <span style="background: #fef3c7; color: #d97706; padding: 0.5rem 1rem; border-radius: 0.5rem; font-size: 0.875rem; font-weight: 600;">JavaScript</span>
                                        <span style="background: #ddd6fe; color: #7c3aed; padding: 0.5rem 1rem; border-radius: 0.5rem; font-size: 0.875rem; font-weight: 600;">PHP</span>
                                        <span style="background: #d1fae5; color: #059669; padding: 0.5rem 1rem; border-radius: 0.5rem; font-size: 0.875rem; font-weight: 600;">SQLite</span>
                                    </div>
                                </div>
                                
                                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 0.75rem; padding: 1.5rem; margin-top: 1.5rem; text-align: center; color: white;">
                                    <p style="margin: 0; font-size: 0.875rem; opacity: 0.9;">¬© 2025 HairBook. V≈°echna pr√°va vyhrazena.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal pro n√°hled √∫ƒçtenky -->
    <div id="receiptModal" class="modal">
        <div class="modal-content" style="max-width: 420px;">
            <div class="modal-header">
                <h3 id="receiptModalTitle">N√°hled √∫ƒçtenky</h3>
                <button class="modal-close" onclick="closeReceiptModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div id="receiptContent" style="padding: 1.5rem; background: white; font-family: 'Courier New', monospace; max-height: 70vh; overflow-y: auto;">
                <!-- Obsah √∫ƒçtenky -->
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeReceiptModal()">
                    <i class="fas fa-times"></i> Zav≈ô√≠t
                </button>
                <button type="button" class="btn btn-primary" onclick="printReceiptFromModal()">
                    <i class="fas fa-print"></i> Tisknout
                </button>
            </div>
        </div>
    </div>

    <!-- Modal pro n√°hled p≈ôehledu tr≈æeb -->
    <div id="revenueModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3>N√°hled p≈ôehledu tr≈æeb</h3>
                <button class="modal-close" onclick="closeRevenueModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div id="revenueContent" style="padding: 1.5rem; background: white; max-height: 70vh; overflow-y: auto;">
                <!-- Obsah p≈ôehledu tr≈æeb -->
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeRevenueModal()">
                    <i class="fas fa-times"></i> Zav≈ô√≠t
                </button>
                <button type="button" class="btn btn-primary" onclick="exportRevenueToCSVFromModal()">
                    <i class="fas fa-download"></i> St√°hnout CSV
                </button>
            </div>
        </div>
    </div>

    <!-- Modal pro n√°hled inventury -->
    <div id="inventoryModal" class="modal">
        <div class="modal-content" style="max-width: 1000px;">
            <div class="modal-header">
                <h3>N√°hled inventury skladu</h3>
                <button class="modal-close" onclick="closeInventoryModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div id="inventoryContent" style="padding: 1.5rem; background: white; max-height: 70vh; overflow-y: auto;">
                <!-- Obsah inventury -->
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeInventoryModal()">
                    <i class="fas fa-times"></i> Zav≈ô√≠t
                </button>
                <button type="button" class="btn btn-primary" onclick="exportInventoryToCSVFromModal()">
                    <i class="fas fa-download"></i> St√°hnout CSV
                </button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
